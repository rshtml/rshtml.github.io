<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RsHtml - A Template Engine for Rust</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Code+Pro:wght@400;600&display=swap"
          rel="stylesheet">

    <!-- EKLEDİM: PRISM.JS RENKLENDİRME TEMASI VE KOPYALA BUTONU STİLİ -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css"
          rel="stylesheet"/>

    <style>
        :root {
            --orange-start: #ffc371;
            --orange-end: #ff5f6d;
            --text-color: #212529;
            --text-light: #f8f9fa;
            --bg-color: #ffffff;
            --link-color: #d9534f;
            --border-color: #e9ecef;
            --code-bg: #f1f3f5;
            --menu-link-color: #5a6169;
        }

        /* ... Önceki CSS kodlarınızın tamamı buraya gelecek ... */
        /* Kısaltmak için eklemedim, mevcut CSS'iniz harika çalışıyor. */

        /* Sadece birkaç ekleme ve düzenleme yapıyoruz */
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            line-height: 1.7;
            background-color: var(--bg-color);
            color: var(--text-color);
            -webkit-font-smoothing: antialiased;
        }

        .hero {
            background: linear-gradient(135deg, var(--orange-start), var(--orange-end));
            color: var(--text-light);
            text-align: center;
            padding: 80px 20px 100px;
            position: relative;
        }

        .hero h1 {
            font-size: 4em;
            margin: 0;
            font-weight: 700;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
        }

        .hero .version {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
            display: inline-block;
            margin-top: 10px;
            font-size: 0.9em;
        }

        .hero .description {
            font-size: 1.3em;
            max-width: 600px;
            margin: 20px auto 30px;
            font-weight: 400;
        }

        .hero-buttons a {
            color: var(--text-light);
            text-decoration: none;
            padding: 12px 25px;
            border: 2px solid var(--text-light);
            border-radius: 5px;
            margin: 0 10px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .hero-buttons a:hover {
            background-color: var(--text-light);
            color: var(--orange-end);
        }

        .container {
            display: flex;
            max-width: 1400px;
            margin: -40px auto 40px;
            padding: 0 20px;
            position: relative;
            background: var(--bg-color);
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .toc-container {
            width: 280px;
            flex-shrink: 0;
            position: sticky;
            top: 40px;
            height: calc(100vh - 80px);
            overflow-y: auto;
            padding: 40px 20px 40px 0;
        }

        .toc-title {
            font-size: 1.1em;
            font-weight: 700;
            color: var(--text-color);
            padding-bottom: 10px;
            margin-bottom: 10px;
        }

        .toc-list {
            padding-left: 0;
            list-style: none;
        }

        .toc-list .toc-list {
            padding-left: 20px;
        }

        .toc-link {
            text-decoration: none;
            color: var(--menu-link-color);
            font-weight: 400;
            display: block;
            padding: 6px 10px;
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
        }

        .is-active-link {
            color: var(--link-color);
            font-weight: 600;
            background-color: #fdf5f5;
            border-left-color: var(--link-color);
        }

        .toc-link:hover {
            color: var(--link-color);
            background-color: #fdf5f5;
        }

        .content {
            flex-grow: 1;
            padding: 40px 0 40px 40px;
            border-left: 1px solid var(--border-color);
        }

        .content h2 {
            font-size: 2em;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
            margin-top: 60px;
            font-weight: 700;
        }

        .content h2:first-of-type {
            margin-top: 0;
        }

        .content h3 {
            font-size: 1.5em;
            margin-top: 40px;
        }

        .content code {
            font-family: 'Source Code Pro', monospace;
            background-color: var(--code-bg);
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-size: 0.9em;
        }

        .content pre[class*="language-"] {
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1.5em 0;
            position: relative; /* Kopyala butonu için gerekli */
        }

        .content pre[class*="language-"] code {
            background-color: transparent;
            padding: 0;
            font-size: 1em;
        }

        .toc-toggle {
            display: none;
            background: var(--orange-end);
            color: white;
            font-weight: 600;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            margin: 20px;
            font-size: 1em;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .toc-toggle {
                display: block;
                position: fixed;
                top: 0px;
                left: 10px;
                z-index: 1100;
                background: var(--orange-end);
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 6px;
                font-size: 1em;
                cursor: pointer;
                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
                opacity: 0.7;
            }

            .toc-container {
                position: fixed;
                top: 0;
                left: 0;
                background: white;
                width: 80%;
                max-width: 320px;
                height: 100vh;
                z-index: 1050;
                padding: 60px 20px 40px 20px;
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
                overflow-y: auto;
            }

            .toc-container.open {
                transform: translateX(0);
            }

            .container {
                margin: 20px auto 40px; /* kenarda negatif marjin kaldırıldı */
                padding: 0 20px;
                max-width: 100%;
                display: block; /* flex'ten çıkarıldı */
            }

            .content {
                padding: 20px 20px 40px 20px;
                border-left: none;
                width: 100%;
            }

            /* İçerik kaymasını önlemek için body overflow kontrolü */
            body.toc-open {
                overflow: hidden;
            }
        }


    </style>
</head>
<body>

<!-- ... HEADER VE DİĞER KISIMLAR OLDUĞU GİBİ KALIYOR ... -->
<header class="hero">
    <h1>RsHtml</h1>
    <p class="description">A compile-time, type-safe, lightweight and flexible template engine for Rust, designed to
        seamlessly integrate Rust code within HTML templates.</p>
    <div class="hero-buttons">
        <a href="https://github.com/rshtml/rshtml" target="_blank">View on GitHub</a>
        <a href="https://crates.io/crates/rshtml" target="_blank">View on Crates.io</a>
    </div>
    <br/>
    <span class="version">Current Version: v0.1.0</span>
</header>
<button class="toc-toggle" aria-label="Toggle Table of Contents">
    &#9776;
</button>
<div class="container">
    <aside class="toc-container">
        <div class="toc-title">Documentation</div>
        <nav class="toc"></nav>
    </aside>
    <main class="content">
        <!-- ... Introduction bölümü ... -->
        <div>
            <h2 id="introduction">🚀 Introduction</h2>
            <p>
                RsHtml is a powerful template engine that transforms your HTML templates into highly
                efficient Rust code at <strong>compile time</strong>. It allows you to
                seamlessly embed Rust logic and expressions directly into your templates, harnessing the full
                power of Rust for dynamic content generation.
            </p>
            <p>
                It is designed to help you build well-structured and maintainable web applications.
                By providing powerful tools for creating reusable components and organizing page layouts,
                RsHtml makes it easier to manage the complexity of your user interface as it grows.
            </p>
        </div>

        <!-- ... Installation & Setup bölümü ... -->
        <div>
            <h2 id="installation-setup">📦 Installation & Setup</h2>
            <h3 id="installation-setup-1">1. Add to <code>Cargo.toml</code></h3>
            <pre><code class="language-toml">[dependencies]
rshtml = "0.1.0" # Use the latest version
</code></pre>
            <h3 id="installation-setup-2">2. Define a Struct</h3>
            <!-- DÜZELTTİM: `<` -> `<` ve `>` -> `>` -->
            <pre><code class="language-rust">use rshtml::RsHtml;

#[derive(RsHtml)]
struct HomePage {
    username: String,
    items: Vec<String>,
}
</code></pre>
            <h3 id="installation-setup-3">3. Render!</h3>
            <pre><code class="language-rust">fn main() {
    let page = HomePage {
        username: "Mehmet".to_string(),
        items: vec!["Item 1".to_string(), "Item 2".to_string()],
    };

    let html_output = page.render().unwrap();
    println!("{}", html_output);
}
</code></pre>
        </div>

        <h2 id="core-syntax">✨ Core Syntax Reference</h2>

        <!-- DÜZENLEDİM: `language-html` -> `language-rshtml` -->
        <h3>Expressions (<code>@</code>)</h3>
        <pre><code class="language-rshtml"><h1>Welcome, @self.username!</h1>
<p>You have @self.items.len() items.</p>
</code></pre>

        <h3>Control Flow</h3>
        <h4>Conditional Rendering: <code>@if / @else</code></h4>
        <pre><code class="language-rshtml">@if self.items.is_empty() {
    <p>You have no items.</p>
} else {
    <p>Here are your items:</p>
}
</code></pre>

        <h4>Loops: <code>@for</code></h4>
        <pre><code class="language-rshtml"><ul>
    @for item in &self.items {
        <li>@item</li>
    }
</ul>
</code></pre>

        <h4>Pattern Matching: <code>@match</code></h4>
        <!-- Bu blokta HTML olmadığı için `language-rust` kalabilir, ama `rshtml` de zarar vermez -->
        <pre><code class="language-rshtml">@match self.items.len() {
    0 => <p>Zero items.</p>,
    1 => <p>One item!</p>,
    n @ 2..=5 => <p>A few items (@n).</p>,
    _ => <p>Many items.</p>
}
</code></pre>

        <!-- Diğer tüm kod bloklarını language-rshtml olarak güncelledim -->
        <h3>Advanced Syntax</h3>
        <h4>Rust Code Blocks: <code>@{...}</code></h4>
        <pre><code class="language-rshtml">@{
    let message = format!("This is a message generated at {}.", chrono::Local::now());
}
<p>@message</p>
</code></pre>
        <h4>Raw Output: <code>@raw { ... }</code></h4>
        <pre><code class="language-rshtml">@raw {
    <script>
        // This @if is ignored by RsHtml
        if (true) {
            console.log("Hello from a raw block!");
        }
    </script>
}
</code></pre>

        <h2 id="layouts-components">🏛️ Layouts & Components</h2>
        <h3>Layout System</h3>
        <pre><code class="language-rshtml">@* In layout.rs.html *@
<!DOCTYPE html>
<body>
    <header>My App</header>
    <main>@render_body</main>
</body>

@* In page.rs.html *@
@extends("layout.rs.html")
<p>This is the page content!</p>
</code></pre>

        <h3>Component System</h3>
        <pre><code class="language-rshtml">@* In components/card.rs.html *@
<div class="card">
    <h3>@self.title</h3>
    <div>@child_content</div>
</div>

@* In page.rs.html *@
@use "components/card.rs.html" as Card

<Card title="My First Card">
    <p>This is the content passed to the card.</p>
</Card>
</code></pre>

        <!-- ... Contributing ve License bölümleri ... -->
        <h2 id="contributing">🤝 Contributing</h2>
        <p>Contributions are welcome! Please visit our <a href="https://github.com/rshtml/rshtml">GitHub repository</a>
            to open issues or submit pull requests.</p>
        <h2 id="license">📜 License</h2>
        <p>RsHtml is licensed under your choice of the <a href="https://github.com/rshtml/rshtml/blob/main/LICENSE-MIT"
                                                          target="_blank">MIT
            License</a> or the <a href="https://github.com/rshtml/rshtml/blob/main/LICENSE-APACHE" target="_blank">Apache
            License</a>.</p>
    </main>
</div>


<!-- =================================================================== -->
<!-- ==== JAVASCRIPT BÖLÜMÜ ==== -->
<!-- =================================================================== -->

<!-- Prism.js Çekirdeği -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<!-- Prism.js Toolbar ve Kopyala Butonu Eklentisi -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
<!-- Gerekli dilleri yüklemek için autoloader (markup, clike, rust, toml dillerini otomatik çeker) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

<!-- EKLEDİM: RSHTML İÇİN ÖZEL RENKLENDİRME KURALI -->
<script>
    // Prism'in autoloader'ı dilleri yüklemeyi bitirdiğinde çalışır
    Prism.hooks.add('before-highlightall', (env) => {
        // 'markup' dilini 'rshtml' olarak klonluyoruz (HTML temelli olduğu için)
        Prism.languages.rshtml = Prism.languages.extend('markup', {});

        // 'rshtml' dilinin içine, 'tag' tanımından önce çalışacak özel kurallarımızı ekliyoruz.
        Prism.languages.insertBefore('rshtml', 'tag', {
            // @if, @for, @match, @raw gibi blok yapılarını yakalar
            'rshtml-block': {
                pattern: /@(?:if|for|match|raw|else|use|extends|section)\b[\s\S]*?\{[\s\S]*?\}|@(?:render_body|child_content)\b/g,
                inside: {
                    // Blok başlangıcını (@if, @for vb.) ve { } ayırt eder
                    'keyword': {
                        pattern: /^@\w+/
                    },
                    // Bloğun geri kalanını Rust olarak renklendirir
                    'rust-content': {
                        pattern: /[\s\S]+/,
                        inside: Prism.languages.rust
                    }
                }
            },
            // @(...) gibi parantezli ifadeleri yakalar
            'rshtml-paren-expression': {
                pattern: /@\((?:[^()]|\([^()]*\))*\)/g,
                inside: {
                    'punctuation': /^@\(|\)$/,
                    'rust-content': {
                        pattern: /[\s\S]+/,
                        inside: Prism.languages.rust
                    }
                }
            },
            // @self.user.name gibi basit ifadeleri yakalar
            'rshtml-simple-expression': {
                pattern: /@[a-zA-Z_][\w.:]*/g,
                inside: {
                    'punctuation': /^@/,
                    'rust-content': {
                        pattern: /[\s\S]+/,
                        inside: Prism.languages.rust
                    }
                }
            },
        });
    });
</script>

<!-- Sol Menüyü Otomatik Oluşturma ve İzleme (Mevcut kodunuz) -->
<script src="https://cdn.jsdelivr.net/npm/tocbot@4.27.19/dist/tocbot.min.js"></script>
<script>
    tocbot.init({
        tocSelector: '.toc',
        contentSelector: '.content',
        headingSelector: 'h2, h3',
        hasInnerContainers: true,
        scrollSmooth: true,
        activeLinkClass: 'is-active-link',
        listClass: 'toc-list',
        linkClass: 'toc-link',
    });
</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const toggleBtn = document.querySelector(".toc-toggle");
        const toc = document.querySelector(".toc-container");
        const body = document.body;

        toggleBtn.addEventListener("click", function () {
            toc.classList.toggle("open");
            body.classList.toggle("toc-open");
        });

        // Menü açıkken içerik tıklanırsa menüyü kapat
        document.addEventListener("click", function (event) {
            if (!toc.contains(event.target) && !toggleBtn.contains(event.target) && toc.classList.contains("open")) {
                toc.classList.remove("open");
                body.classList.remove("toc-open");
            }
        });

        // Menüdeki herhangi bir linke tıklanınca menüyü kapat
        toc.querySelectorAll("a").forEach(link => {
            link.addEventListener("click", () => {
                toc.classList.remove("open");
                body.classList.remove("toc-open");
            });
        });
    });

    document.querySelectorAll('.content h3').forEach((el) => {
        if (!el.id) {
            el.id = el.textContent.toLowerCase().replace(/\s+/g, '-').replace(/[^\w-]/g, '');
        }
    });
</script>

</body>
</html>